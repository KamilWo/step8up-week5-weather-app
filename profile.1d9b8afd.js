document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("profile-form"),t=document.getElementById("avatar-upload"),a=document.getElementById("avatar-preview"),l=document.getElementById("username"),o=document.getElementById("email"),r=document.getElementById("email-confirm"),n=document.getElementById("email-notifications"),m=document.getElementById("delete-account-btn"),i="weatherDashProfile";e&&e.addEventListener("submit",e=>{e.preventDefault(),(()=>{if(o.value!==r.value){alert("Email addresses do not match. Please correct them."),r.focus();return}let e=JSON.parse(localStorage.getItem(i))||{},t=a.style.backgroundImage.slice(5,-2),m={username:l.value.trim(),email:o.value.trim(),emailNotifications:n.checked,avatar:t.startsWith("data:image")?t:e.avatar};localStorage.setItem(i,JSON.stringify(m)),alert("Profile changes saved successfully!")})()}),t&&a&&t.addEventListener("change",e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{let t=e.target.result;a.style.backgroundImage=`url('${t}')`;let l=JSON.parse(localStorage.getItem(i))||{};l.avatar=t,localStorage.setItem(i,JSON.stringify(l))},e.readAsDataURL(t)}}),m&&m.addEventListener("click",()=>{confirm("Are you sure you want to delete your account? This action cannot be undone.")&&(localStorage.removeItem(i),localStorage.removeItem(SETTINGS_KEY),alert("Account data cleared from this browser! (Simulation)"),window.location.href="./weather-dashboard.html")}),(()=>{let e=JSON.parse(localStorage.getItem(i));e&&(l.value=e.username||"Kamil Wozniak",o.value=e.email||"kamil.wozniak@example.com",r.value=e.email||"kamil.wozniak@example.com",n.checked=e.emailNotifications??!0,e.avatar&&(a.style.backgroundImage=`url('${e.avatar}')`))})()});
//# sourceMappingURL=profile.1d9b8afd.js.map
